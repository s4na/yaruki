<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å›ç­”çµŒè·¯ - è¡Œå‹•ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ - æ¬¡ã®ä¸€æ­©ã‚’è¦‹ã¤ã‘ã‚‹</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ§­ è¡Œå‹•ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³</h1>
            <p class="tagline">Yes/No ã ã‘ã§ã€Œæ¬¡ã®ä¸€æ­©ã€ãŒè¦‹ãˆã‚‹</p>
            <p class="subtitle">ã‚ãªãŸã®è¡Œå‹•ã‚’ãƒ–ãƒ­ãƒƒã‚¯ã—ã¦ã„ã‚‹ç†ç”±ã‚’ä¸€ç·’ã«è¦‹ã¤ã‘ã¾ã—ã‚‡ã†</p>
        </header>

        <main id="app">
            <div id="journey-container" class="journey-section-page">
                <div class="journey-box">
                    <div class="journey-header">
                        <h2>ã‚ãªãŸã®å›ç­”çµŒè·¯</h2>
                        <p class="journey-subtitle">ã©ã®ã‚ˆã†ãªåˆ¤æ–­ã§ã€ã“ã®çµæœã«è¾¿ã‚Šç€ãã¾ã—ãŸã‹</p>
                    </div>

                    <div class="journey-content-wrapper">
                        <div id="journey-content" class="journey-content"></div>
                    </div>

                    <div class="journey-actions">
                        <button id="back-to-result-btn" class="btn btn-back">çµæœã«æˆ»ã‚‹</button>
                        <button id="restart-from-journey-btn" class="btn btn-restart">åˆ¥ã®è¦–ç‚¹ã§è¦‹ç›´ã™</button>
                    </div>
                </div>
            </div>
        </main>

        <footer>
            <p>ã‚·ãƒ³ãƒ—ãƒ«ãª Yes/No ã ã‘ã§ã€è¡Œå‹•ã®ãƒ–ãƒ­ãƒƒã‚«ãƒ¼ã‚’åˆ†æã—ã¾ã™</p>
        </footer>
    </div>

    <script>
        // journey.htmlã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆãŒå®Ÿè¡Œã•ã‚Œã‚‹æ™‚ç‚¹ã§ã€å›ç­”çµŒè·¯ã‚’è¡¨ç¤º
        window.addEventListener('DOMContentLoaded', () => {
            const answerHistoryFromStorage = localStorage.getItem('yaruki-answer-history');

            if (!answerHistoryFromStorage) {
                // å›ç­”å±¥æ­´ãŒãªã„å ´åˆã¯è³ªå•ãƒšãƒ¼ã‚¸ã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ
                window.location.href = 'index.html';
                return;
            }

            try {
                const answerHistory = JSON.parse(answerHistoryFromStorage);
                displayJourney(answerHistory);
            } catch (error) {
                console.error('Failed to load journey:', error);
                window.location.href = 'index.html';
            }
        });

        // å›ç­”çµŒè·¯ã‚’è¡¨ç¤º
        function displayJourney(answerHistory) {
            let journeyHTML = '<div class="journey-list">';

            answerHistory.forEach((item, index) => {
                const answerLabel = item.answer === 'yes' ? 'Yes' : 'No';
                const answerClass = item.answer === 'yes' ? 'answer-yes' : 'answer-no';
                journeyHTML += `
                    <div class="journey-item">
                        <div class="journey-step">${index + 1}</div>
                        <div class="journey-question">${item.question}</div>
                        <div class="journey-answer ${answerClass}">${answerLabel}</div>
                    </div>
                `;
            });

            journeyHTML += '</div>';
            const journeyContent = document.getElementById('journey-content');
            journeyContent.innerHTML = journeyHTML;
        }

        // ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ã™ã¹ã¦ã‚¯ãƒªã‚¢
        function clearAllCache() {
            localStorage.removeItem('yaruki-result');
            localStorage.removeItem('yaruki-answer-history');
            localStorage.removeItem('yaruki-current-question');
        }

        // ãƒœã‚¿ãƒ³ã®ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼
        document.getElementById('back-to-result-btn').addEventListener('click', () => {
            window.location.href = 'result.html';
        });

        document.getElementById('restart-from-journey-btn').addEventListener('click', () => {
            clearAllCache();
            window.location.href = 'index.html';
        });
    </script>
</body>
</html>
